!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.JogoDaVelha=n()}(this,function(){"use strict";var r=function(t){function i(t){var n;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,i);var e=[0,0,0],r=function(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n}(this,(n=i.__proto__||Object.getPrototypeOf(i)).call.apply(n,[this].concat(function(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}(t||[e,e,e]))));return r.reset=function(){return r.forEach(function(t,n){return r[n]=e})},Object.defineProperty(r,"winner",{get:function(){for(var t=void 0,n=0,e=0,r=0,i=2;r<=2;r++,i--){switch(n+=this[r][r],e+=this[r][i],3){case Math.abs(n):t=Math.sign(n);break;case Math.abs(e):t=Math.sign(e)}for(var o=0,s=0,a=0;a<=2;a++)switch(o+=this[i][a],s+=this[a][r],3){case Math.abs(o):t=Math.sign(o);break;case Math.abs(s):t=Math.sign(s)}}return t}}),r}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}(i,Array),i}();var i=function t(n,e){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||"o",this[n=n||"x"]=-1,this[e]=1,this[-1]=n,this[1]=e};return function t(n){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.onstart=function(){},this.onnext=function(){},this.onfinish=function(){},n&&(this.onstart=n.onstart||this.onstart,this.onnext=n.onnext||this.onnext,this.onfinish=n.onfinish||this.onfinish);var o=new i,s=new r(n?n.board:null),e=-1;this.reset=function(){return s.reset()},this.next={play:function(t){var n=t.p,e=t.x,r=t.y;n&&(r=Math.ceil(n/3)-1,e=n%3),this.onnext(),s[r][e]=this.next.player;var i=s.winner;i?(this.winner=o[i],this.onfinish(this.winner)):this.next.player=1===this.next.player?-1:1}},Object.defineProperty(this.next,"player",{get:function(){return o[e]},set:function(t){e=Number.isNaN(t)||1!==Math.abs(t)?o[t]:t}}),Object.defineProperty(this,"board",{get:function(){return s.map(function(t){return t.map(function(t){return o[t]})})},set:function(t){s=t.map(function(t){return t.map(function(t){return o[t]})})}}),this.onstart()}});
